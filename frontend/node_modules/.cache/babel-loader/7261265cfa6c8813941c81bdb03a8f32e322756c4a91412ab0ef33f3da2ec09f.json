{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport NavBar from \"@/components/NavBar.vue\";\nimport CartItem from \"@/components/CartItem.vue\";\nimport CartSummary from \"@/components/CartSummary.vue\";\nimport EmptyCartMessage from \"@/components/EmptyCartMessage.vue\";\nexport default {\n  name: \"CartPage\",\n  components: {\n    NavBar,\n    CartItem,\n    CartSummary,\n    EmptyCartMessage\n  },\n  data() {\n    return {\n      cart: []\n    };\n  },\n  created() {\n    this.loadCartFromStorage();\n  },\n  methods: {\n    loadCartFromStorage() {\n      const stored = localStorage.getItem(\"cartItems\");\n      try {\n        this.cart = stored ? JSON.parse(stored) : [];\n      } catch (e) {\n        console.error(\"Impossible de parser le panier depuis localStorage\", e);\n        this.cart = [];\n      }\n    },\n    saveCartToStorage() {\n      try {\n        localStorage.setItem(\"cartItems\", JSON.stringify(this.cart));\n      } catch (e) {\n        console.error(\"Erreur lors de la sauvegarde du panier\", e);\n      }\n    },\n    removeItem(id) {\n      this.cart = this.cart.filter(item => item.id !== id);\n      this.saveCartToStorage();\n    },\n    calculateTotal() {\n      return this.cart.reduce((sum, item) => sum + item.qty * parseFloat(item.price_ttc || 0), 0).toFixed(2);\n    },\n    validateCart() {\n      // TODO : implémenter envoi de commande ou redirection\n      alert(\"Commande validée !\");\n    }\n  }\n};","map":{"version":3,"names":["NavBar","CartItem","CartSummary","EmptyCartMessage","name","components","data","cart","created","loadCartFromStorage","methods","stored","localStorage","getItem","JSON","parse","e","console","error","saveCartToStorage","setItem","stringify","removeItem","id","filter","item","calculateTotal","reduce","sum","qty","parseFloat","price_ttc","toFixed","validateCart","alert"],"sources":["/Users/macbookpro/Sham/S6/Eval2-1/frontend/src/views/CartPage.vue"],"sourcesContent":["<template>\n    <div class=\"cart-page\">\n      <NavBar />\n  \n      <h1 class=\"cart-title\">Votre panier</h1>\n  \n      <div v-if=\"cart.length > 0\" class=\"cart-container\">\n        <CartItem\n          v-for=\"item in cart\"\n          :key=\"item.rowid\"\n          :line-id=\"item.rowid\"\n          :name=\"item.label\"\n          :description=\"item.description\"\n          :price-ttc=\"parseFloat(item.total_ttc / item.qty)\"\n          :quantity=\"item.qty\"\n          :image=\"item.photo\"\n          @remove=\"removeItem\"\n        />\n        <CartSummary :total-price=\"calculateTotal()\" @validate=\"validateCart\" />\n      </div>\n  \n      <EmptyCartMessage v-else />\n    </div>\n  </template>\n  \n  <script>\n  import NavBar from \"@/components/NavBar.vue\";\n  import CartItem from \"@/components/CartItem.vue\";\n  import CartSummary from \"@/components/CartSummary.vue\";\n  import EmptyCartMessage from \"@/components/EmptyCartMessage.vue\";\n  \n  export default {\n    name: \"CartPage\",\n    components: {\n      NavBar,\n      CartItem,\n      CartSummary,\n      EmptyCartMessage,\n    },\n    data() {\n      return {\n        cart: [],\n      };\n    },\n    created() {\n    this.loadCartFromStorage();\n  },\n  methods: {\n    loadCartFromStorage() {\n      const stored = localStorage.getItem(\"cartItems\");\n      try {\n        this.cart = stored ? JSON.parse(stored) : [];\n      } catch (e) {\n        console.error(\"Impossible de parser le panier depuis localStorage\", e);\n        this.cart = [];\n      }\n    },\n\n    saveCartToStorage() {\n      try {\n        localStorage.setItem(\"cartItems\", JSON.stringify(this.cart));\n      } catch (e) {\n        console.error(\"Erreur lors de la sauvegarde du panier\", e);\n      }\n    },\n\n    removeItem(id) {\n      this.cart = this.cart.filter(item => item.id !== id);\n      this.saveCartToStorage();\n    },\n\n    calculateTotal() {\n      return this.cart\n        .reduce((sum, item) => sum + item.qty * parseFloat(item.price_ttc || 0), 0)\n        .toFixed(2);\n    },\n\n    validateCart() {\n      // TODO : implémenter envoi de commande ou redirection\n      alert(\"Commande validée !\");\n    },\n  },\n};\n  </script>\n  \n  <style scoped>\n  .cart-page {\n    max-width: 900px;\n    margin: 0 auto;\n    padding: 20px;\n  }\n  .cart-title {\n    font-size: 2rem;\n    margin-bottom: 20px;\n    color: #F6F6FE;\n  }\n  .cart-container {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    color: #F6F6FE;\n  }\n  </style>\n  "],"mappings":";;;AA0BE,OAAOA,MAAK,MAAO,yBAAyB;AAC5C,OAAOC,QAAO,MAAO,2BAA2B;AAChD,OAAOC,WAAU,MAAO,8BAA8B;AACtD,OAAOC,gBAAe,MAAO,mCAAmC;AAEhE,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVL,MAAM;IACNC,QAAQ;IACRC,WAAW;IACXC;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACV,IAAI,CAACC,mBAAmB,CAAC,CAAC;EAC5B,CAAC;EACDC,OAAO,EAAE;IACPD,mBAAmBA,CAAA,EAAG;MACpB,MAAME,MAAK,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MAChD,IAAI;QACF,IAAI,CAACN,IAAG,GAAII,MAAK,GAAIG,IAAI,CAACC,KAAK,CAACJ,MAAM,IAAI,EAAE;MAC9C,EAAE,OAAOK,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,oDAAoD,EAAEF,CAAC,CAAC;QACtE,IAAI,CAACT,IAAG,GAAI,EAAE;MAChB;IACF,CAAC;IAEDY,iBAAiBA,CAAA,EAAG;MAClB,IAAI;QACFP,YAAY,CAACQ,OAAO,CAAC,WAAW,EAAEN,IAAI,CAACO,SAAS,CAAC,IAAI,CAACd,IAAI,CAAC,CAAC;MAC9D,EAAE,OAAOS,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,wCAAwC,EAAEF,CAAC,CAAC;MAC5D;IACF,CAAC;IAEDM,UAAUA,CAACC,EAAE,EAAE;MACb,IAAI,CAAChB,IAAG,GAAI,IAAI,CAACA,IAAI,CAACiB,MAAM,CAACC,IAAG,IAAKA,IAAI,CAACF,EAAC,KAAMA,EAAE,CAAC;MACpD,IAAI,CAACJ,iBAAiB,CAAC,CAAC;IAC1B,CAAC;IAEDO,cAAcA,CAAA,EAAG;MACf,OAAO,IAAI,CAACnB,IAAG,CACZoB,MAAM,CAAC,CAACC,GAAG,EAAEH,IAAI,KAAKG,GAAE,GAAIH,IAAI,CAACI,GAAE,GAAIC,UAAU,CAACL,IAAI,CAACM,SAAQ,IAAK,CAAC,CAAC,EAAE,CAAC,EACzEC,OAAO,CAAC,CAAC,CAAC;IACf,CAAC;IAEDC,YAAYA,CAAA,EAAG;MACb;MACAC,KAAK,CAAC,oBAAoB,CAAC;IAC7B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}