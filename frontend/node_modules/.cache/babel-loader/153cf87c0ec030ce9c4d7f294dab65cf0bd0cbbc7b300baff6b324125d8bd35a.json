{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavBar from '@/components/NavBar.vue';\nexport default {\n  name: 'ShopPage',\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      products: [{\n        image: require('@/assets/item/Frame 7.png'),\n        name: 'Selle Brooks B17',\n        description: 'Conçue pour épouser parfaitement la posture du cycliste.',\n        id: 1,\n        price: 120.00\n      }, {\n        image: require('@/assets/item/Frame 71.png'),\n        name: 'Kit Sport Vélo',\n        description: 'Un kit complet pour les passionnés de vélo.'\n      }, {\n        image: require('@/assets/item/Frame 72.png'),\n        name: 'Éclairages LED',\n        description: 'Des éclairages puissants pour une visibilité optimale.'\n      }, {\n        image: require('@/assets/item/Frame 73.png'),\n        name: 'Casque Bern Watts 2.0',\n        description: 'Un casque léger et résistant, conçu pour le confort.'\n      }]\n    };\n  },\n  methods: {\n    async addToCart(product) {\n      // Vérification de la connexion\n      const isLoggedIn = localStorage.getItem('authToken'); // Vérifier un token ou état d'authentification\n\n      if (!isLoggedIn) {\n        alert('Vous devez être connecté pour ajouter des produits au panier.');\n        this.$router.push({\n          name: 'login'\n        });\n        return; // Ne pas ajouter au panier si non connecté\n      }\n\n      // Vérifier si le panier existe déjà dans localStorage\n      let cart = JSON.parse(localStorage.getItem('cart')) || [];\n\n      // Vérifier si le produit est déjà dans le panier\n      const existingProductIndex = cart.findIndex(item => item.name === product.name);\n      if (existingProductIndex !== -1) {\n        // Si le produit existe déjà, on augmente sa quantité\n        cart[existingProductIndex].quantity += 1;\n      } else {\n        // Sinon, on ajoute le produit avec une quantité initiale de 1\n        product.quantity = 1;\n        cart.push(product);\n      }\n\n      // Enregistrer le panier dans localStorage\n      localStorage.setItem('cart', JSON.stringify(cart));\n\n      // Ajouter le produit à la commande 0 (panier) côté Dolibarr\n      await this.addProductToDolibarrCart(product);\n\n      // Affichage d'un message d'ajout au panier\n      alert(`Produit ajouté au panier : ${product.name}`);\n    },\n    async addProductToDolibarrCart(product) {\n      try {\n        // Récupérer l'API key\n        const apiKey = localStorage.getItem('apiKey');\n        const apiLink = localStorage.getItem('apiLink');\n        if (!apiLink) {\n          throw new Error('API Link manquant');\n        }\n        if (!apiKey) {\n          throw new Error('API Key manquante');\n        }\n\n        // ID de la commande 0 (panier)\n        const orderId = 0; // Commande Brouillon de Dolibarr\n\n        // Créer l'objet de données à envoyer\n        const orderLine = {\n          fk_product: product.id,\n          // ID produit côté Dolibarr\n          qty: product.quantity,\n          // Quantité du produit\n          price: product.price // Prix du produit\n        };\n        const response = await fetch(`${apiLink}/orders/${orderId}/lines`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'DOLAPIKEY': apiKey\n          },\n          body: JSON.stringify(orderLine)\n        });\n        if (response.ok) {\n          console.log('Produit ajouté à la commande Dolibarr');\n        } else {\n          console.error('Erreur lors de l\\'ajout du produit à la commande Dolibarr');\n        }\n      } catch (error) {\n        console.error('Erreur lors de l\\'ajout du produit à Dolibarr:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["NavBar","name","components","data","products","image","require","description","id","price","methods","addToCart","product","isLoggedIn","localStorage","getItem","alert","$router","push","cart","JSON","parse","existingProductIndex","findIndex","item","quantity","setItem","stringify","addProductToDolibarrCart","apiKey","apiLink","Error","orderId","orderLine","fk_product","qty","response","fetch","method","headers","body","ok","console","log","error"],"sources":["/Users/macbookpro/Sham/S6/stellarz-web/stellarz-b/stellar-web/src/views/ShopPage.vue"],"sourcesContent":["<template>\n  <NavBar />\n  <section class=\"shop-section\">\n    <h2 class=\"section-title\">NOS</h2>\n    <h2 class=\"section-title\">PRODUITS</h2>\n\n    <div class=\"cards-container\">\n      <div \n        v-for=\"(product, index) in products\" \n        :key=\"index\" \n        class=\"product-card\"\n      >\n        <img :src=\"product.image\" :alt=\"product.name\" class=\"product-image\" />\n        <h3 class=\"product-name\">{{ product.name }}</h3>\n        <p class=\"product-description\">{{ product.description }}</p>\n        <button class=\"product-button\" @click=\"addToCart(product)\">Ajouter au panier</button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport NavBar from '@/components/NavBar.vue';\n\nexport default {\n  name: 'ShopPage',\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      products: [\n        {\n          image: require('@/assets/item/Frame 7.png'),\n          name: 'Selle Brooks B17',\n          description: 'Conçue pour épouser parfaitement la posture du cycliste.',\n          id: 1,\n          price: 120.00\n        },\n        {\n          image: require('@/assets/item/Frame 71.png'),\n          name: 'Kit Sport Vélo',\n          description: 'Un kit complet pour les passionnés de vélo.',\n        },\n        {\n          image: require('@/assets/item/Frame 72.png'),\n          name: 'Éclairages LED',\n          description: 'Des éclairages puissants pour une visibilité optimale.',\n        },\n        {\n          image: require('@/assets/item/Frame 73.png'),\n          name: 'Casque Bern Watts 2.0',\n          description: 'Un casque léger et résistant, conçu pour le confort.',\n        }\n      ]\n    };\n  },\n  methods: {\n  async addToCart(product) {\n    // Vérification de la connexion\n    const isLoggedIn = localStorage.getItem('authToken'); // Vérifier un token ou état d'authentification\n\n    if (!isLoggedIn) {\n      alert('Vous devez être connecté pour ajouter des produits au panier.');\n      this.$router.push({ name: 'login' });\n      return; // Ne pas ajouter au panier si non connecté\n    }\n\n    // Vérifier si le panier existe déjà dans localStorage\n    let cart = JSON.parse(localStorage.getItem('cart')) || [];\n\n    // Vérifier si le produit est déjà dans le panier\n    const existingProductIndex = cart.findIndex(item => item.name === product.name);\n    if (existingProductIndex !== -1) {\n      // Si le produit existe déjà, on augmente sa quantité\n      cart[existingProductIndex].quantity += 1;\n    } else {\n      // Sinon, on ajoute le produit avec une quantité initiale de 1\n      product.quantity = 1;\n      cart.push(product);\n    }\n\n    // Enregistrer le panier dans localStorage\n    localStorage.setItem('cart', JSON.stringify(cart));\n\n    // Ajouter le produit à la commande 0 (panier) côté Dolibarr\n    await this.addProductToDolibarrCart(product);\n\n    // Affichage d'un message d'ajout au panier\n    alert(`Produit ajouté au panier : ${product.name}`);\n  },\n\n  async addProductToDolibarrCart(product) {\n    try {\n      // Récupérer l'API key\n      const apiKey = localStorage.getItem('apiKey');\n      const apiLink = localStorage.getItem('apiLink');\n      if (!apiLink) {\n        throw new Error('API Link manquant');\n      }\n\n      if (!apiKey) {\n        throw new Error('API Key manquante');\n      }\n\n      // ID de la commande 0 (panier)\n      const orderId = 0;  // Commande Brouillon de Dolibarr\n\n      // Créer l'objet de données à envoyer\n      const orderLine = {\n        fk_product: product.id,  // ID produit côté Dolibarr\n        qty: product.quantity,   // Quantité du produit\n        price: product.price,    // Prix du produit\n      };\n\n      const response = await fetch(`${apiLink}/orders/${orderId}/lines`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'DOLAPIKEY': apiKey,\n        },\n        body: JSON.stringify(orderLine),\n      });\n\n      if (response.ok) {\n        console.log('Produit ajouté à la commande Dolibarr');\n      } else {\n        console.error('Erreur lors de l\\'ajout du produit à la commande Dolibarr');\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du produit à Dolibarr:', error);\n    }\n  }\n}\n\n};\n</script>\n\n<style scoped>\n/* Optionnel : modifications spécifiques à la page Shop */\n.shop-section {\n  text-align: left;\n  padding: 40px 20px;\n}\n\n.section-title {\n  font-size: 56px;\n  font-family: 'DAWBE';\n  color: #F7F7F7;\n  margin-left: 115px;\n  margin-bottom: 0;\n  margin-top: 0;\n}\n\n@font-face {\n  font-family: 'PP Formula';\n  src: url('@/assets/fonts/PPFormula-NarrowRegular.otf') format('opentype');\n  font-weight: medium;\n}\n\n@font-face {\n  font-family: 'DAWBE';\n  src: url('@/assets/fonts/dawbe.otf') format('opentype');\n  font-weight: bold;\n}\n\n/* Section globale */\n.products-section {\n  text-align: left;\n  padding: 40px 20px;\n}\n\n/* Titre */\n.section-title {\n  font-size: 56px;\n  margin-left: 115px ;\n  font-family: 'DAWBE';\n  color: #F7F7F7;\n  text-align: left;\n  margin-bottom: 0;\n  margin-top: 0;\n}\n\n/* Conteneur des cartes */\n.cards-container {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr); /* 3 produits par ligne */\n  gap: 50px;\n  max-width: 75%; /* Ajuste à la largeur du parent */\n  overflow-x: hidden; /* Empêche le scroll horizontal */\n  overflow-y: auto; /* Défilement vertical */\n  padding-bottom: 10px;\n  margin-left: 25%;\n  height: 100vh; /* Ajuste la hauteur pour voir le scroll vertical */\n}\n\n/* Style des cartes */\n.product-card {\n  background-color: white;\n  padding: 15px;\n  border-radius: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease, color 0.3s ease;\n  text-align: left;\n  width: 100%;\n  height: 499px;\n  flex-shrink: 0; \n  flex-grow: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.product-card:hover {\n  transform: scale(1.05);\n  color: #5AAAD8;\n}\n\n/* Image */\n.product-image {\n  width: 221px;\n  height: auto;\n  border-radius: 8px;\n  margin-left: 100px;\n}\n\n/* Nom du produit */\n.product-name {\n  font-size: 1.5em;\n  margin: 10px 0;\n  font-family: 'DAWBE';\n  color: #1E1E1E;\n  max-width: 250px; /* Ajuste selon ton design */\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  white-space: normal;\n  margin-bottom: 0;\n}\n\n/* Description */\n.product-description {\n  margin-top: 0;\n  font-size: 1em;\n  color: #1E1E1E;\n  font-family: 'PP Formula', sans-serif;\n  margin-bottom: 10px;\n  max-width: 250px; /* Ajuste selon ton design */\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  white-space: normal;\n}\n\n/* Bouton */\n.product-button {\n  padding: 10px 15px;\n  border: none;\n  background-color: #0E100E;\n  color: white;\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color 0.3s;\n  font-family: 'PP Formula', sans-serif;\n  margin-top: auto; /* Pousse le bouton en bas */\n  align-self: flex-end; /* Pour le placer en bas de la carte */\n}\n\n.product-card:hover .product-name,\n.product-card:hover .product-description {\n  color: #5AAAD8; /* Change la couleur du texte au hover */\n}\n\n.product-button:hover {\n  background-color: #5AAAD8;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}