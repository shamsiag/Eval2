{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport NavBar from '@/components/NavBar.vue';\nexport default {\n  name: 'ShopPage',\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      products: [],\n      // Produits à afficher dans le shop\n      cartItems: [],\n      // Articles du panier récupérés de Dolibarr\n      cartId: null,\n      // ID de la commande brouillon\n      apiKey: localStorage.getItem('apiKey'),\n      // API Key pour Dolibarr\n      apiLink: localStorage.getItem('apiLink') // API Link pour Dolibarr\n    };\n  },\n  created() {\n    this.fetchProductsFromDolibarr(); // Récupérer les produits au moment de la création du composant\n    this.getCartItems(); // Récupérer les articles du panier\n  },\n  methods: {\n    async fetchProductsFromDolibarr() {\n      try {\n        console.log('Tentative de récupération des produits depuis Dolibarr...');\n        if (!this.apiKey || !this.apiLink) {\n          console.error('API Key ou API Link manquant');\n          throw new Error(\"API Key ou API Link manquant\");\n        }\n        const url = `${this.apiLink}/products`; // URL de l'API Dolibarr pour récupérer les produits\n        const response = await fetch(url, {\n          headers: {\n            \"DOLAPIKEY\": this.apiKey\n          }\n        });\n        if (!response.ok) {\n          console.error(`Erreur réseau: ${response.statusText}`);\n          throw new Error(\"Erreur de récupération des produits.\");\n        }\n        const products = await response.json();\n        console.log(\"Réponse de l'API:\", products);\n        this.products = products.map(product => {\n          const tvaRate = product.tva_tx / 100;\n          const priceTtc = product.price * (1 + tvaRate);\n          return {\n            id: product.id,\n            name: product.label,\n            description: product.description || 'Aucune description disponible.',\n            image: product.fk_photo ? `${this.apiLink}/product/photos/${product.fk_photo}` : null,\n            price_ht: product.price,\n            price_ttc: priceTtc.toFixed(2)\n          };\n        });\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des produits:\", error);\n      }\n    },\n    async getCartItems() {\n      try {\n        console.log('Tentative de récupération des articles du panier...');\n        const clientId = localStorage.getItem('clientId');\n        if (!clientId || !this.apiKey || !this.apiLink) {\n          console.error('Données manquantes (ClientId, API Key ou API Link)');\n          throw new Error(\"Données manquantes (ClientId, API Key ou API Link)\");\n        }\n        const searchUrl = `${this.apiLink}/orders?fk_soc=${clientId}&status=0`;\n        const response = await fetch(searchUrl, {\n          headers: {\n            \"DOLAPIKEY\": this.apiKey\n          }\n        });\n        if (!response.ok) {\n          console.error(`Erreur réseau: ${response.statusText}`);\n          throw new Error(\"Erreur de récupération des commandes brouillons.\");\n        }\n        const orders = await response.json();\n        console.log(\"Commandes brouillons:\", orders);\n        if (Array.isArray(orders) && orders.length > 0) {\n          const cartId = orders[0].id;\n          this.cartId = cartId;\n          this.fetchCartItems(cartId); // Récupérer les articles de cette commande\n        } else {\n          console.log(\"Aucune commande brouillon trouvée.\");\n        }\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération du panier:\", error);\n      }\n    },\n    async fetchCartItems(cartId) {\n      try {\n        console.log(`Tentative de récupération des articles pour le panier ID: ${cartId}...`);\n        const url = `${this.apiLink}/orders/${cartId}/lines`;\n        const response = await fetch(url, {\n          headers: {\n            \"DOLAPIKEY\": this.apiKey\n          }\n        });\n        if (!response.ok) {\n          console.error(`Erreur réseau: ${response.statusText}`);\n          throw new Error(\"Erreur de récupération des lignes du panier.\");\n        }\n        const cartItems = await response.json();\n        this.cartItems = cartItems;\n        console.log(\"Articles du panier:\", cartItems);\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des articles du panier:\", error);\n      }\n    },\n    formatPrice(price) {\n      return `${price} MGA`; // Formatage du prix avec la devise\n    },\n    async addToCart(product) {\n      console.log('Tentative d\\'ajout au panier pour le produit:', product);\n      const isLoggedIn = localStorage.getItem('authToken'); // Vérifier un token ou état d'authentification\n\n      if (!isLoggedIn) {\n        alert('Vous devez être connecté pour ajouter des produits au panier.');\n        this.$router.push({\n          name: 'login'\n        });\n        return;\n      }\n      const existingItem = this.cartItems.find(item => item.fk_product === product.id);\n      if (existingItem) {\n        console.log('Produit déjà dans le panier, mise à jour de la quantité...');\n        existingItem.qty += 1;\n        existingItem.subprice = (existingItem.qty * product.price).toFixed(2);\n        const updateData = {\n          quantity: existingItem.qty,\n          subprice: existingItem.subprice,\n          tva_tx: product.tva_tx\n        };\n        try {\n          const response = await axios.put(`${this.apiLink}/orders/${this.cartId}/lines/${existingItem.rowid}`, updateData, {\n            headers: {\n              \"DOLAPIKEY\": this.apiKey,\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              qty: parseFloat(product.quantity)\n            })\n          });\n          if (response.status === 200) {\n            console.log('Mise à jour du panier réussie');\n            this.fetchCartItems(this.cartId); // Recharger les articles du panier\n          } else {\n            console.error(\"Erreur lors de la mise à jour du panier :\", response);\n          }\n        } catch (error) {\n          console.error(\"Erreur axios (update):\", error);\n        }\n      } else {\n        console.log('Produit non trouvé dans le panier, ajout...');\n        const itemData = {\n          fk_product: product.id,\n          qty: 1,\n          subprice: product.price,\n          tva_tx: product.tva_tx,\n          label: product.label,\n          product_desc: product.description || \"\",\n          product_ref: product.ref,\n          price: product.price,\n          product_tobuy: 1,\n          product_tosell: 1,\n          weight: product.weight || 0,\n          width: product.width || 0,\n          length: product.length || 0,\n          height: product.height || 0,\n          localtax1_tx: \"0.0000\",\n          localtax2_tx: \"0.0000\",\n          total_ht: product.price,\n          total_ttc: (product.price * (1 + product.tva_tx / 100)).toFixed(2)\n        };\n        try {\n          const response = await axios.post(`${this.apiLink}/orders/${this.cartId}/lines`, itemData, {\n            headers: {\n              \"DOLAPIKEY\": this.apiKey,\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          if (response.status === 200 || response.status === 201) {\n            console.log('Ajout au panier réussi');\n            this.fetchCartItems(this.cartId); // Recharger les articles du panier\n          } else {\n            console.error(\"Erreur lors de l’ajout au panier :\", response);\n          }\n        } catch (error) {\n          console.error(\"Erreur axios (add):\", error);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","NavBar","name","components","data","products","cartItems","cartId","apiKey","localStorage","getItem","apiLink","created","fetchProductsFromDolibarr","getCartItems","methods","console","log","error","Error","url","response","fetch","headers","ok","statusText","json","map","product","tvaRate","tva_tx","priceTtc","price","id","label","description","image","fk_photo","price_ht","price_ttc","toFixed","clientId","searchUrl","orders","Array","isArray","length","fetchCartItems","formatPrice","addToCart","isLoggedIn","alert","$router","push","existingItem","find","item","fk_product","qty","subprice","updateData","quantity","put","rowid","body","JSON","stringify","parseFloat","status","itemData","product_desc","product_ref","ref","product_tobuy","product_tosell","weight","width","height","localtax1_tx","localtax2_tx","total_ht","total_ttc","post"],"sources":["/Users/macbookpro/Sham/S6/stellarz-web/stellarz-b/stellar-web/src/views/ShopPage.vue"],"sourcesContent":["<template>\n  <NavBar />\n  <section class=\"shop-section\">\n    <h2 class=\"section-title\">NOS</h2>\n    <h2 class=\"section-title\">PRODUITS</h2>\n\n    <div class=\"cards-container\">\n      <div \n        v-for=\"(product, index) in products\" \n        :key=\"index\" \n        class=\"product-card\"\n      >\n        <img :src=\"product.image || require('@/assets/item/default-product.png')\" :alt=\"product.name\" class=\"product-image\" />\n        <h3 class=\"product-name\">{{ product.name }}</h3>\n        <p class=\"product-description\">{{ product.description }}</p>\n        <p class=\"product-price\">{{ formatPrice(product.price_ttc) }}</p>\n        <button class=\"product-button\" @click=\"addToCart(product)\">Ajouter au panier</button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport axios from 'axios'; \nimport NavBar from '@/components/NavBar.vue';\n\nexport default {\n  name: 'ShopPage',\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      products: [], // Produits à afficher dans le shop\n      cartItems: [], // Articles du panier récupérés de Dolibarr\n      cartId: null, // ID de la commande brouillon\n      apiKey: localStorage.getItem('apiKey'), // API Key pour Dolibarr\n      apiLink: localStorage.getItem('apiLink'), // API Link pour Dolibarr\n    };\n  },\n  created() {\n    this.fetchProductsFromDolibarr(); // Récupérer les produits au moment de la création du composant\n    this.getCartItems(); // Récupérer les articles du panier\n  },\n  methods: {\n    async fetchProductsFromDolibarr() {\n      try {\n        console.log('Tentative de récupération des produits depuis Dolibarr...');\n        if (!this.apiKey || !this.apiLink) {\n          console.error('API Key ou API Link manquant');\n          throw new Error(\"API Key ou API Link manquant\");\n        }\n\n        const url = `${this.apiLink}/products`; // URL de l'API Dolibarr pour récupérer les produits\n        const response = await fetch(url, {\n          headers: {\n            \"DOLAPIKEY\": this.apiKey,\n          },\n        });\n\n        if (!response.ok) {\n          console.error(`Erreur réseau: ${response.statusText}`);\n          throw new Error(\"Erreur de récupération des produits.\");\n        }\n\n        const products = await response.json();\n        console.log(\"Réponse de l'API:\", products); \n        this.products = products.map(product => {\n          const tvaRate = product.tva_tx / 100;\n          const priceTtc = product.price * (1 + tvaRate);\n\n          return {\n            id: product.id,\n            name: product.label,\n            description: product.description || 'Aucune description disponible.',\n            image: product.fk_photo ? `${this.apiLink}/product/photos/${product.fk_photo}` : null,\n            price_ht: product.price,\n            price_ttc: priceTtc.toFixed(2),\n          };\n        });\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des produits:\", error);\n      }\n    },\n\n    async getCartItems() {\n      try {\n        console.log('Tentative de récupération des articles du panier...');\n        const clientId = localStorage.getItem('clientId');\n        if (!clientId || !this.apiKey || !this.apiLink) {\n          console.error('Données manquantes (ClientId, API Key ou API Link)');\n          throw new Error(\"Données manquantes (ClientId, API Key ou API Link)\");\n        }\n\n        const searchUrl = `${this.apiLink}/orders?fk_soc=${clientId}&status=0`;\n        const response = await fetch(searchUrl, {\n          headers: {\n            \"DOLAPIKEY\": this.apiKey,\n          },\n        });\n\n        if (!response.ok) {\n          console.error(`Erreur réseau: ${response.statusText}`);\n          throw new Error(\"Erreur de récupération des commandes brouillons.\");\n        }\n\n        const orders = await response.json();\n        console.log(\"Commandes brouillons:\", orders);\n\n        if (Array.isArray(orders) && orders.length > 0) {\n          const cartId = orders[0].id;\n          this.cartId = cartId;\n          this.fetchCartItems(cartId); // Récupérer les articles de cette commande\n        } else {\n          console.log(\"Aucune commande brouillon trouvée.\");\n        }\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération du panier:\", error);\n      }\n    },\n\n    async fetchCartItems(cartId) {\n      try {\n        console.log(`Tentative de récupération des articles pour le panier ID: ${cartId}...`);\n        const url = `${this.apiLink}/orders/${cartId}/lines`;\n        const response = await fetch(url, {\n          headers: {\n            \"DOLAPIKEY\": this.apiKey,\n          },\n        });\n\n        if (!response.ok) {\n          console.error(`Erreur réseau: ${response.statusText}`);\n          throw new Error(\"Erreur de récupération des lignes du panier.\");\n        }\n\n        const cartItems = await response.json();\n        this.cartItems = cartItems;\n        console.log(\"Articles du panier:\", cartItems);\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des articles du panier:\", error);\n      }\n    },\n\n    formatPrice(price) {\n      return `${price} MGA`; // Formatage du prix avec la devise\n    },\n\n    async addToCart(product) {\n      console.log('Tentative d\\'ajout au panier pour le produit:', product);\n      const isLoggedIn = localStorage.getItem('authToken'); // Vérifier un token ou état d'authentification\n\n      if (!isLoggedIn) {\n        alert('Vous devez être connecté pour ajouter des produits au panier.');\n        this.$router.push({ name: 'login' });\n        return;\n      }\n\n      const existingItem = this.cartItems.find(item => item.fk_product === product.id);\n      if (existingItem) {\n        console.log('Produit déjà dans le panier, mise à jour de la quantité...');\n        existingItem.qty += 1;\n        existingItem.subprice = (existingItem.qty * product.price).toFixed(2);\n\n        const updateData = {\n          quantity: existingItem.qty,\n          subprice: existingItem.subprice,\n          tva_tx: product.tva_tx,\n        };\n\n        try {\n          const response = await axios.put(\n            `${this.apiLink}/orders/${this.cartId}/lines/${existingItem.rowid}`,\n            updateData,\n            {\n              headers: {\n                \"DOLAPIKEY\": this.apiKey,\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({ qty: parseFloat(product.quantity) }),\n            }\n          );\n\n          if (response.status === 200) {\n            console.log('Mise à jour du panier réussie');\n            this.fetchCartItems(this.cartId); // Recharger les articles du panier\n          } else {\n            console.error(\"Erreur lors de la mise à jour du panier :\", response);\n          }\n        } catch (error) {\n          console.error(\"Erreur axios (update):\", error);\n        }\n      } else {\n        console.log('Produit non trouvé dans le panier, ajout...');\n        const itemData = {\n          fk_product: product.id,\n          qty: 1,\n          subprice: product.price,\n          tva_tx: product.tva_tx,\n          label: product.label,\n          product_desc: product.description || \"\",\n          product_ref: product.ref,\n          price: product.price,\n          product_tobuy: 1,\n          product_tosell: 1,\n          weight: product.weight || 0,\n          width: product.width || 0,\n          length: product.length || 0,\n          height: product.height || 0,\n          localtax1_tx: \"0.0000\", \n          localtax2_tx: \"0.0000\",\n          total_ht: product.price,\n          total_ttc: (product.price * (1 + product.tva_tx / 100)).toFixed(2),\n        };\n\n        try {\n          const response = await axios.post(\n            `${this.apiLink}/orders/${this.cartId}/lines`,\n            itemData,\n            {\n              headers: {\n                \"DOLAPIKEY\": this.apiKey,\n                \"Content-Type\": \"application/json\",\n              },\n            }\n          );\n\n          if (response.status === 200 || response.status === 201) {\n            console.log('Ajout au panier réussi');\n            this.fetchCartItems(this.cartId); // Recharger les articles du panier\n          } else {\n            console.error(\"Erreur lors de l’ajout au panier :\", response);\n          }\n        } catch (error) {\n          console.error(\"Erreur axios (add):\", error);\n        }\n      }\n    },\n  },\n};\n</script>\n\n\n\n<style scoped>\n/* Optionnel : modifications spécifiques à la page Shop */\n.shop-section {\n  text-align: left;\n  padding: 40px 20px;\n}\n\n.section-title {\n  font-size: 56px;\n  font-family: 'DAWBE';\n  color: #F7F7F7;\n  margin-left: 115px;\n  margin-bottom: 0;\n  margin-top: 0;\n}\n\n@font-face {\n  font-family: 'PP Formula';\n  src: url('@/assets/fonts/PPFormula-NarrowRegular.otf') format('opentype');\n  font-weight: medium;\n}\n\n@font-face {\n  font-family: 'DAWBE';\n  src: url('@/assets/fonts/dawbe.otf') format('opentype');\n  font-weight: bold;\n}\n\n/* Section globale */\n.products-section {\n  text-align: left;\n  padding: 40px 20px;\n}\n\n/* Titre */\n.section-title {\n  font-size: 56px;\n  margin-left: 115px;\n  font-family: 'DAWBE';\n  color: #F7F7F7;\n  text-align: left;\n  margin-bottom: 0;\n  margin-top: 0;\n}\n\n/* Conteneur des cartes */\n.cards-container {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr); /* 3 produits par ligne */\n  gap: 50px;\n  max-width: 75%; /* Ajuste à la largeur du parent */\n  overflow-x: hidden; /* Empêche le scroll horizontal */\n  overflow-y: auto; /* Défilement vertical */\n  padding-bottom: 10px;\n  margin-left: 25%;\n  height: 100vh; /* Ajuste la hauteur pour voir le scroll vertical */\n}\n\n/* Style des cartes */\n.product-card {\n  background-color: white;\n  padding: 15px;\n  border-radius: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease, color 0.3s ease;\n  text-align: left;\n  width: 100%;\n  height: 499px;\n  flex-shrink: 0; \n  flex-grow: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.product-card:hover {\n  transform: scale(1.05);\n  color: #5AAAD8;\n}\n\n/* Image */\n.product-image {\n  width: 221px;\n  height: auto;\n  border-radius: 8px;\n  margin-left: 100px;\n}\n\n/* Nom du produit */\n.product-name {\n  font-size: 1.5em;\n  margin: 10px 0;\n  font-family: 'DAWBE';\n  color: #1E1E1E;\n  max-width: 250px;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  white-space: normal;\n  margin-bottom: 0;\n}\n\n/* Description */\n.product-description {\n  margin-top: 0;\n  font-size: 1em;\n  color: #1E1E1E;\n  font-family: 'PP Formula', sans-serif;\n  margin-bottom: 10px;\n  max-width: 250px;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  white-space: normal;\n}\n\n/* Bouton */\n.product-button {\n  padding: 10px 15px;\n  border: none;\n  background-color: #0E100E;\n  color: white;\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color 0.3s;\n  font-family: 'PP Formula', sans-serif;\n  margin-top: auto;\n  align-self: flex-end;\n}\n\n.product-card:hover .product-name,\n.product-card:hover .product-description {\n  color: #5AAAD8;\n}\n\n.product-button:hover {\n  background-color: #5AAAD8;\n}\n.product-price {\n  font-size: 1.2em;\n  color: #1E1E1E;\n  margin-top: 10px;\n  font-family: 'PP Formula', sans-serif;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}