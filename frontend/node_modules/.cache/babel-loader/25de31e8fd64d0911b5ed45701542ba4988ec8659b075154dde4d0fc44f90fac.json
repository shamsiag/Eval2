{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cart-page\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"cart-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavBar = _resolveComponent(\"NavBar\");\n  const _component_CartItem = _resolveComponent(\"CartItem\");\n  const _component_CartSummary = _resolveComponent(\"CartSummary\");\n  const _component_EmptyCartMessage = _resolveComponent(\"EmptyCartMessage\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_NavBar), _cache[0] || (_cache[0] = _createElementVNode(\"h1\", {\n    class: \"cart-title\"\n  }, \"Votre panier\", -1 /* HOISTED */)), $data.cart.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cart, item => {\n    return _openBlock(), _createBlock(_component_CartItem, {\n      key: item.rowid,\n      \"line-id\": item.rowid,\n      name: item.label,\n      description: item.description,\n      \"price-ttc\": parseFloat(item.total_ttc / item.qty),\n      quantity: item.qty,\n      image: item.photo,\n      onRemove: $options.removeItem\n    }, null, 8 /* PROPS */, [\"line-id\", \"name\", \"description\", \"price-ttc\", \"quantity\", \"image\", \"onRemove\"]);\n  }), 128 /* KEYED_FRAGMENT */)), _createVNode(_component_CartSummary, {\n    \"total-price\": $options.calculateTotal(),\n    onValidate: $options.validateCart\n  }, null, 8 /* PROPS */, [\"total-price\", \"onValidate\"])])) : (_openBlock(), _createBlock(_component_EmptyCartMessage, {\n    key: 1\n  }))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_NavBar","_createElementVNode","$data","cart","length","_hoisted_2","_Fragment","_renderList","item","_createBlock","_component_CartItem","rowid","name","label","description","parseFloat","total_ttc","qty","quantity","image","photo","onRemove","$options","removeItem","_component_CartSummary","calculateTotal","onValidate","validateCart","_component_EmptyCartMessage"],"sources":["/Users/macbookpro/Sham/S6/Eval2-1/frontend/src/views/CartPage.vue"],"sourcesContent":["<template>\n    <div class=\"cart-page\">\n      <NavBar />\n  \n      <h1 class=\"cart-title\">Votre panier</h1>\n  \n      <div v-if=\"cart.length > 0\" class=\"cart-container\">\n        <CartItem\n          v-for=\"item in cart\"\n          :key=\"item.rowid\"\n          :line-id=\"item.rowid\"\n          :name=\"item.label\"\n          :description=\"item.description\"\n          :price-ttc=\"parseFloat(item.total_ttc / item.qty)\"\n          :quantity=\"item.qty\"\n          :image=\"item.photo\"\n          @remove=\"removeItem\"\n        />\n        <CartSummary :total-price=\"calculateTotal()\" @validate=\"validateCart\" />\n      </div>\n  \n      <EmptyCartMessage v-else />\n    </div>\n  </template>\n  \n  <script>\n  import NavBar from \"@/components/NavBar.vue\";\n  import CartItem from \"@/components/CartItem.vue\";\n  import CartSummary from \"@/components/CartSummary.vue\";\n  import EmptyCartMessage from \"@/components/EmptyCartMessage.vue\";\n  \n  export default {\n    name: \"CartPage\",\n    components: {\n      NavBar,\n      CartItem,\n      CartSummary,\n      EmptyCartMessage,\n    },\n    data() {\n      return {\n        cart: [],\n      };\n    },\n    methods: {\n      fetchCart() {\n        fetch(\"http://localhost:8000/cart\")\n          .then((res) => res.json())\n          .then((data) => {\n            this.cart = data;\n          })\n          .catch((err) => {\n            console.error(\"Erreur de chargement du panier :\", err);\n          });\n      },\n      removeItem(id) {\n        this.cart = this.cart.filter((item) => item.rowid !== id);\n      },\n      calculateTotal() {\n        return this.cart.reduce((acc, item) => acc + parseFloat(item.total_ttc), 0);\n      },\n      validateCart() {\n        // Implémentation future : redirection ou envoi de commande\n        alert(\"Commande validée !\");\n      },\n    },\n    mounted() {\n      this.fetchCart();\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .cart-page {\n    max-width: 900px;\n    margin: 0 auto;\n    padding: 20px;\n  }\n  .cart-title {\n    font-size: 2rem;\n    margin-bottom: 20px;\n  }\n  .cart-container {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  </style>\n  "],"mappings":";;EACSA,KAAK,EAAC;AAAW;;EAD1BC,GAAA;EAMkCD,KAAK,EAAC;;;;;;;uBALpCE,mBAAA,CAqBM,OArBNC,UAqBM,GApBJC,YAAA,CAAUC,iBAAA,G,0BAEVC,mBAAA,CAAwC;IAApCN,KAAK,EAAC;EAAY,GAAC,cAAY,sBAExBO,KAAA,CAAAC,IAAI,CAACC,MAAM,Q,cAAtBP,mBAAA,CAaM,OAbNQ,UAaM,I,kBAZJR,mBAAA,CAUES,SAAA,QAjBVC,WAAA,CAQyBL,KAAA,CAAAC,IAAI,EAAZK,IAAI;yBADbC,YAAA,CAUEC,mBAAA;MARCd,GAAG,EAAEY,IAAI,CAACG,KAAK;MACf,SAAO,EAAEH,IAAI,CAACG,KAAK;MACnBC,IAAI,EAAEJ,IAAI,CAACK,KAAK;MAChBC,WAAW,EAAEN,IAAI,CAACM,WAAW;MAC7B,WAAS,EAAEC,UAAU,CAACP,IAAI,CAACQ,SAAS,GAAGR,IAAI,CAACS,GAAG;MAC/CC,QAAQ,EAAEV,IAAI,CAACS,GAAG;MAClBE,KAAK,EAAEX,IAAI,CAACY,KAAK;MACjBC,QAAM,EAAEC,QAAA,CAAAC;;kCAEXxB,YAAA,CAAwEyB,sBAAA;IAA1D,aAAW,EAAEF,QAAA,CAAAG,cAAc;IAAKC,UAAQ,EAAEJ,QAAA,CAAAK;6EAG1DlB,YAAA,CAA2BmB,2BAAA;IArBjChC,GAAA;EAAA,I","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}