{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\",\n  ref: \"document\"\n};\nconst _hoisted_2 = {\n  id: \"element-to-convert\"\n};\nconst _hoisted_3 = {\n  class: \"entete\"\n};\nconst _hoisted_4 = {\n  class: \"ref-commande\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"logo\"\n  }, [_createElementVNode(\"img\", {\n    src: \"/Property 1=Variant2.png\",\n    alt: \"Logo de la marque\"\n  })], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h1\", null, \"Facture\" + _toDisplayString(_ctx.invoice.ref), 1 /* TEXT */), _createElementVNode(\"h3\", null, \"Date facturation : \" + _toDisplayString(_ctx.invoice.date_creation), 1 /* TEXT */), _createElementVNode(\"h3\", null, \"Date échéance : \" + _toDisplayString(_ctx.invoice.date_creation), 1 /* TEXT */)]), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"emetteur\"\n  }, [_createElementVNode(\"h3\", null, \"VR 61 HF Ambohimiandra\"), _createElementVNode(\"h3\", null, \"101 Antananarivo\"), _createElementVNode(\"h3\", null, \"Madagascar\"), _createElementVNode(\"h3\", null, \"Tél.: +261349933136\")], -1 /* HOISTED */)), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"client\"\n  }, [_createElementVNode(\"b\", null, \"VR 61 HF Ambohimiandra\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_4, [_cache[1] || (_cache[1] = _createElementVNode(\"h4\", null, \"Commandes\", -1 /* HOISTED */)), _createElementVNode(\"h4\", null, _toDisplayString(_ctx.invoice.ref), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"h4\", null, \"Réf. commande :\", -1 /* HOISTED */)), _cache[3] || (_cache[3] = _createElementVNode(\"h4\", null, \"Date de commande : 09/04/2025\", -1 /* HOISTED */))]), _cache[7] || (_cache[7] = _createStaticVNode(\"<table class=\\\"detail-commande\\\"><tr><th class=\\\"detail-commande-designation\\\">Désignation</th><th>TVA </th><th>P.U. HT</th><th>Qté</th><th>Total HT</th></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></table><div class=\\\"bas-de-page\\\"><b>Total HT</b><b>Total TVA</b><b>Total TTC</b></div><div class=\\\"details-paiement\\\"><table class=\\\"small-table\\\"><th>Versements déjà effectués</th><tr><td>Règlement</td><td>Montant</td><td>Type</td></tr><tr><td>Règlement</td><td>Montant</td><td>Type</td></tr></table></div>\", 3))])], 512 /* NEED_PATCH */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.exportToPDF && $options.exportToPDF(...args))\n  }, \"Export to PDF\")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["id","ref","class","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_hoisted_2","src","alt","_hoisted_3","_toDisplayString","_ctx","invoice","date_creation","_hoisted_4","_createStaticVNode","onClick","_cache","args","$options","exportToPDF"],"sources":["/Users/macbookpro/Sham/S6/stellarz-web/stellarz-b/stellar-web/src/components/InvoiceSection.vue"],"sourcesContent":["<template>\n    <div id=\"app\" ref=\"document\">\n      <div id=\"element-to-convert\">\n\n        <div class=\"logo\">\n            <img src=\"/Property 1=Variant2.png\" alt=\"Logo de la marque\" />\n        </div>\n\n        <div class=\"entete\">\n            <h1>Facture{{ invoice.ref}}</h1>\n            <h3>Date facturation : {{ invoice.date_creation}}</h3>\n            <h3>Date échéance : {{ invoice.date_creation}}</h3>\n        </div>\n\n        <div class=\"emetteur\">\n            <h3>VR 61 HF Ambohimiandra</h3>\n            <h3>101 Antananarivo</h3>\n            <h3>Madagascar</h3>\n            <h3>Tél.: +261349933136</h3>\n        </div>\n\n        <div class=\"client\">\n            <b>VR 61 HF Ambohimiandra</b>\n        </div>\n\n        <div class=\"ref-commande\">\n            <h4>Commandes</h4>\n            <h4>{{ invoice.ref}}</h4>\n            <h4>Réf. commande :</h4>\n            <h4>Date de commande : 09/04/2025</h4>\n        </div>\n\n        <table class=\"detail-commande\">\n        <tr>\n            <th class=\"detail-commande-designation\">Désignation</th>\n            <th>TVA   </th>\n            <th>P.U. HT</th>\n            <th>Qté</th>\n            <th>Total HT</th>\n        </tr>\n        <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td></td>\n        </tr>\n        </table>\n\n        <div class=\"bas-de-page\">\n            <b>Total HT</b>\n            <b>Total TVA</b>\n            <b>Total TTC</b>\n        </div>\n\n        <div class=\"details-paiement\">\n            <table class=\"small-table\">\n                <th>Versements déjà effectués</th>\n                <tr>\n                    <td>Règlement</td>\n                    <td>Montant</td>\n                    <td>Type</td>\n                </tr>\n                <tr>\n                    <td>Règlement</td>\n                    <td>Montant</td>\n                    <td>Type</td>\n                </tr>\n            </table>\n        </div>\n\n      </div>\n    </div>\n    <button @click=\"exportToPDF\">Export to PDF</button>\n  </template>\n\n<script>\nimport html2pdf from \"html2pdf.js\";\n\nexport default {\n  name: \"InvoiceSection\",\n  data() {\n    return {\n      apiKey: localStorage.getItem(\"apiKey\"),\n      apiLink: localStorage.getItem(\"apiLink\"),\n      clientId: localStorage.getItem(\"clientId\"),\n      invoiceId: localStorage.getItem(\"invoiceId\"),\n    };\n  },\n  created() {\n    this.getInvoice();\n    this.invoice=\"\";\n  },\n  \n  methods: {\n    exportToPDF() {\n      html2pdf(document.getElementById(\"element-to-convert\"), {\n        margin: 1,\n        filename: \"generated-pdf.pdf\",\n      });\n    },\n\n    async getInvoice(){\n        try {\n    console.log('Tentative de récupération des produits depuis Dolibarr...');\n    if (!this.apiKey || !this.apiLink) throw new Error(\"API Key ou API Link manquant\");\n\n    const url = `${this.apiLink}/invoices/${this.invoiceId}`;\n    const response = await fetch(url, {\n      headers: {\n        \"DOLAPIKEY\": this.apiKey\n      }\n    });\n\n    if (!response.ok) throw new Error(`Erreur réseau: ${response.statusText}`);\n\n    const invoices = await response.json();\n    this.invoice = invoices => {\n      console.log(\"Facture récupéré:\", invoices);\n      return {\n        id: invoices.id,\n        ref: invoices.ref,\n        total_ht: invoices.total_ht,\n        total_tva:invoices.total_tva,\n        total_ttc:invoices.total_ttc,\n        product_name: invoices.lines.ref,\n        product_total_ht: invoices.lines.total_ht,\n        product_quantity: invoices.lines.qty,\n        product_unit_price_ht: invoices.lines.total_ht/invoices.lines.qty,\n        product_tva: invoices.lines.tva_tx,\n        date_creation: invoices.date_creation\n        \n      };\n    };\n    invoices=1;\n    console.log(invoices);\n    \n    console.log('Produits récupérés et traités:', this.invoices);\n  } catch (error) {\n    console.error(\"Erreur lors de la récupération des produits:\", error);\n  }\n\n    },\n  },\n};\n</script>\n  \n  <style>\n  #app {\n    margin-top: 60px;\n  }\n  </style>"],"mappings":";;EACSA,EAAE,EAAC,KAAK;EAACC,GAAG,EAAC;;;EACXD,EAAE,EAAC;AAAoB;;EAMrBE,KAAK,EAAC;AAAQ;;EAiBdA,KAAK,EAAC;AAAc;;uBAzBjCC,mBAAA,CAAAC,SAAA,SACIC,mBAAA,CAuEM,OAvENC,UAuEM,GAtEJD,mBAAA,CAqEM,OArENE,UAqEM,G,0BAnEJF,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAM,IACbG,mBAAA,CAA8D;IAAzDG,GAAG,EAAC,0BAA0B;IAACC,GAAG,EAAC;2BAG5CJ,mBAAA,CAIM,OAJNK,UAIM,GAHFL,mBAAA,CAAgC,YAA5B,SAAO,GAAAM,gBAAA,CAAGC,IAAA,CAAAC,OAAO,CAACZ,GAAG,kBACzBI,mBAAA,CAAsD,YAAlD,qBAAmB,GAAAM,gBAAA,CAAGC,IAAA,CAAAC,OAAO,CAACC,aAAa,kBAC/CT,mBAAA,CAAmD,YAA/C,kBAAgB,GAAAM,gBAAA,CAAGC,IAAA,CAAAC,OAAO,CAACC,aAAa,iB,6BAGhDT,mBAAA,CAKM;IALDH,KAAK,EAAC;EAAU,IACjBG,mBAAA,CAA+B,YAA3B,wBAAsB,GAC1BA,mBAAA,CAAyB,YAArB,kBAAgB,GACpBA,mBAAA,CAAmB,YAAf,YAAU,GACdA,mBAAA,CAA4B,YAAxB,qBAAmB,E,gDAG3BA,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAQ,IACfG,mBAAA,CAA6B,WAA1B,wBAAsB,E,sBAG7BA,mBAAA,CAKM,OALNU,UAKM,G,0BAJFV,mBAAA,CAAkB,YAAd,WAAS,sBACbA,mBAAA,CAAyB,YAAAM,gBAAA,CAAlBC,IAAA,CAAAC,OAAO,CAACZ,GAAG,kB,0BAClBI,mBAAA,CAAwB,YAApB,iBAAe,sB,0BACnBA,mBAAA,CAAsC,YAAlC,+BAA6B,qB,6BA7B7CW,kBAAA,khB,2BAyEIX,mBAAA,CAAmD;IAA1CY,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;KAAE,eAAa,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}